
image: node:12.18.4

services:
    - docker:dind

stages:
    - build
    - deploy
  
build:
    stage: build
    only:
        - build
    script:
        - npm install
        - install docker-compose
        - docker-compose up -d --build

deploy:
    stage: deploy
    only: 
        - deploy
    script:
        - sudo apt-get install -y python-pip
        - pip install docker-compose
        - docker-compose up -d --build
